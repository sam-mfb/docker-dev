# Tinyproxy configuration for exp-proxy sidecar
#
# This proxy provides HTTP/HTTPS internet access to the experimental container,
# which lives on a Docker internal network with no direct route to the outside.
# Host access is restricted by iptables on the proxy container itself.

User nobody
Group nogroup

Port 8888
Listen 0.0.0.0

# Generous timeout for slow npm installs / large git clones
Timeout 600

# No ConnectPort restrictions -- the proxy's iptables handle host blocking.
# Tinyproxy freely forwards CONNECT to internet hosts on any port.

# Only allow connections from the internal network
Allow 172.30.0.0/24

# Log to stdout for docker logs
LogFile "/dev/stdout"
LogLevel Warning

MaxClients 50

# Don't leak proxy info in headers
DisableViaHeader Yes
